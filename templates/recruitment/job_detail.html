{% extends 'base.html' %}
{% block title %}{{ vacancy.title }} - PNGCS Recruitment{% endblock %}
{% block content %}
<div class="container py-4">
    <nav aria-label="breadcrumb" class="mb-3">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'recruitment:job_list' %}">Vacancies</a></li>
            <li class="breadcrumb-item active">{{ vacancy.title }}</li>
        </ol>
    </nav>
    <div class="row">
        <div class="col-md-8">
            <div class="card mb-3">
                <div class="card-body p-4">
                    <h2 class="fw-bold" style="color: var(--pngcs-blue);">{{ vacancy.title }}</h2>
                    <p class="text-muted mb-3">
                        <i class="bi bi-building me-1"></i><strong>{{ vacancy.department }}</strong>
                        &nbsp;|&nbsp;<i class="bi bi-geo-alt me-1"></i>{{ vacancy.province }}
                        &nbsp;|&nbsp;<span class="badge bg-info text-dark">Ref: {{ vacancy.reference_number }}</span>
                    </p>
                    <h6 class="fw-bold text-muted text-uppercase small">Position Description</h6>
                    <p>{{ vacancy.description }}</p>
                    <h6 class="fw-bold text-muted text-uppercase small mt-3">Requirements & Qualifications</h6>
                    <p>{{ vacancy.requirements }}</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card mb-3">
                <div class="card-header bg-pngcs text-white">
                    <strong><i class="bi bi-info-circle me-2"></i>Position Details</strong>
                </div>
                <div class="card-body">
                    <table class="table table-sm table-borderless mb-0">
                        <tr><td class="text-muted fw-semibold small">Category</td><td>{{ vacancy.get_category_display }}</td></tr>
                        <tr><td class="text-muted fw-semibold small">Min. Qualification</td><td>{{ vacancy.get_qualification_level_display }}</td></tr>
                        <tr><td class="text-muted fw-semibold small">Positions</td><td><span class="badge bg-success">{{ vacancy.positions_available }}</span></td></tr>
                        <tr><td class="text-muted fw-semibold small">Age Range</td><td>{{ vacancy.min_age }} - {{ vacancy.max_age }} years</td></tr>
                        {% if vacancy.salary_range %}
                        <tr><td class="text-muted fw-semibold small">Salary</td><td>{{ vacancy.salary_range }}</td></tr>
                        {% endif %}
                        <tr><td class="text-muted fw-semibold small">Opens</td><td>{{ vacancy.open_date|date:"d M Y" }}</td></tr>
                        <tr><td class="text-muted fw-semibold small">Closes</td><td class="text-danger fw-bold">{{ vacancy.close_date|date:"d M Y" }}</td></tr>
                    </table>
                </div>
            </div>
            <div class="d-grid gap-2">
                {% if already_applied %}
                    <button class="btn btn-success" disabled><i class="bi bi-check-circle me-2"></i>Already Applied</button>
                {% elif user.is_authenticated %}
                    <a href="{% url 'recruitment:apply' vacancy.pk %}" class="btn btn-pngcs btn-lg">
                        <i class="bi bi-send me-2"></i>Apply Now
                    </a>
                {% else %}
                    <a href="{% url 'accounts:login' %}?next={% url 'recruitment:apply' vacancy.pk %}" class="btn btn-pngcs btn-lg">
                        <i class="bi bi-box-arrow-in-right me-2"></i>Login to Apply
                    </a>
                    <a href="{% url 'accounts:register' %}" class="btn btn-outline-secondary">
                        <i class="bi bi-person-plus me-2"></i>Create Account
                    </a>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
